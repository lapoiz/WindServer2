{% macro displayRosace() %}

    <style type="text/css">

        #rosaceWindSVG {
            /*border:1px dashed #ccc;*/
            height:340px;
            width:340px
        }

        #rosaceWindSVG path {
            stroke:black;
            stroke-width:"1"
        }

        .rosace-Lettre-principal {
            font-size: 20px;
            text-decoration: none;
            font-weight:bold
        }

        .rosace-Lettre-tertiaire {
            font-size: 10px;
            text-decoration: none;
            font-style: italic;
        }

    </style>

    <svg id="rosaceWindSVG"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns="http://www.w3.org/2000/svg"
         onload="svgLoad()"   >

        <defs>
            <symbol id="principal">
                <path d="M 20 0 L 20 150 40 130 z" />
                <path d="M 20 0 L 20 150 0 130 z"
                      fill="black" />
            </symbol>

            <symbol id="secondaire">
                <path d="M 20 10 L 20 150 30 135 z"
                      fill="black" />
                <path d="M 20 10 L 20 150 10 135 z" />
            </symbol>

            <symbol id="tertiaire">
                <path d="M 20 30 L 20 150 30 140 z" />
                <path d="M 20 30 L 20 150 10 140 z"
                      fill="DimGray" />
            </symbol>

        </defs>

        <text id="nordTxt" x="163" y="18" class="rosace-Lettre-principal">N</text>
        <text id="estTxt" x="323" y="177" class="rosace-Lettre-principal">E</text>
        <text id="sudTxt" x="163" y="336" class="rosace-Lettre-principal">S</text>
        <text id="westTxt" x="0" y="177" class="rosace-Lettre-principal">W</text>

        <text id="nord-estTxt" x="272" y="70" class="rosace-Lettre-secondaire">NE</text>
        <text id="sud-estTxt" x="272" y="280" class="rosace-Lettre-secondaire">SE</text>
        <text id="sud-westTxt" x="45" y="280" class="rosace-Lettre-secondaire">SW</text>
        <text id="nord-westTxt" x="45" y="70" class="rosace-Lettre-secondaire">NW</text>


        <text id="nord-nord-estTxt" x="205" y="55" class="rosace-Lettre-tertiaire">NNE</text>
        <text id="est-nord-estTxt" x="282" y="125" class="rosace-Lettre-tertiaire">ENE</text>
        <text id="est-sud-estTxt" x="282" y="222" class="rosace-Lettre-tertiaire">ESE</text>
        <text id="sud-sud-estTxt" x="200" y="294" class="rosace-Lettre-tertiaire">SSE</text>
        <text id="sud-sud-westTxt" x="110" y="292" class="rosace-Lettre-tertiaire">SSW</text>
        <text id="west-sud-westTxt" x="30" y="225" class="rosace-Lettre-tertiaire">WSW</text>
        <text id="west-nord-westTxt" x="30" y="125" class="rosace-Lettre-tertiaire">WNW</text>
        <text id="nord-nord-westTxt" x="105" y="55" class="rosace-Lettre-tertiaire">NNW</text>

        <circle cx="170" cy="170" r="80" style="stroke:black; stroke-width: 1px;fill:white;" />

        <use id="nord-nord-est" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="est-nord-est" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="est-sud-est" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="sud-sud-est" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="sud-sud-west" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="west-sud-west" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="west-nord-west" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />
        <use id="nord-nord-west" xlink:href="#tertiaire" x="150" y="20" fill="Gainsboro" />


        <use id="nord-est" xlink:href="#secondaire" x="150" y="20" fill="DimGray" />
        <use id="sud-est" xlink:href="#secondaire" x="150" y="20" fill="DimGray" />
        <use id="sud-west" xlink:href="#secondaire" x="150" y="20" fill="DimGray" />
        <use id="nord-west" xlink:href="#secondaire" x="150" y="20" fill="DimGray" />

        <use id="nord" xlink:href="#principal" x="150" y="20" fill="white" />
        <use id="sud" xlink:href="#principal" x="150" y="20" fill="white" />
        <use id="est" xlink:href="#principal" x="150" y="20" fill="white" />
        <use id="west" xlink:href="#principal" x="150" y="20" fill="white" />



        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#est"
                          from="0 150 170"
                          to="90 170  170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#sud"
                          from="0 150 170"
                          to="180 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#west"
                          from="0 150 170"
                          to="270 170  170"
                />

        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#nord-est"
                          from="0 150 170"
                          to="45 170  170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#sud-est"
                          from="0 150 170"
                          to="135 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#sud-west"
                          from="0 150 170"
                          to="225 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#nord-west"
                          from="0 150 170"
                          to="315 170 170"
                />


        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#nord-nord-est"
                          from="0 150 170"
                          to="22.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#est-nord-est"
                          from="0 150 170"
                          to="65.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#est-sud-est"
                          from="0 150 170"
                          to="112.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#sud-sud-est"
                          from="0 150 170"
                          to="160.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#sud-sud-west"
                          from="0 150 170"
                          to="202.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#west-sud-west"
                          from="0 150 170"
                          to="247.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#west-nord-west"
                          from="0 150 170"
                          to="292.5 170 170"
                />
        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" begin="0s" repeatCount="1" fill="freeze"
                          xlink:href="#nord-nord-west"
                          from="0 150 170"
                          to="337.5 170 170"
                />

    </svg>

<script>
    /*
    Couleur par defaut, lorsque pas d'etat: blanc, sinon noir
     */
    function colorState(state, defaultColor) {
        var colorState = "green";
        switch (state) {
            case "OK": colorState="green";
                break;
            case "warn": colorState="orange";
                break;
            case "KO": colorState="red";
                break;
            case "?": colorState= (defaultColor=='w'?"white":"black");
                break;
        }
        return colorState;
    }

    function svgLoad(orientationState) {
        /*
         var orientationState = new Array();
         orientationState["nord"]="OK";
         orientationState["nord-nord-est"]="OK";
         */
        if (typeof orientationState !== 'undefined') {

            for (var id in orientationState)
            {
                $('#'+id).attr("fill", colorState(orientationState[id],'w'));
                $('#'+id+'Txt').attr("fill", colorState(orientationState[id],'b'));
            }
        }
    }
</script>


{% endmacro %}