{% extends 'LaPoizWindBundle:FrontOffice:base.html.twig' %}

{% block scriptGraph %}
    <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
{% endblock %}

{% block bodyPage %}

<div class="row">
    <div class="col-sm-12">
        {% from "LaPoizWindBundle:FrontOffice/spot:graph.html.twig" import graph %}
        {{ graph(spot) }}
    </div>
</div>

<div class="row">
    <div class="col-sm-6 centered">
        {% from "LaPoizWindBundle:BackOffice/Spot/Ajax:rosaceWind.html.twig" import displayRosace %}
        {{ displayRosace() }}


        <script>

            // **************************************
            // ** Gestion de l'orientation du vent **
            // **************************************
            var tabOrientationState = new Array(); // Array with orientation => state, used for rosace wind

            getOrientationDataFromSpot();

            // Récupére les données de l'objet spot et les pousse dans la rosace

            function getOrientationDataFromSpot() {
                // Parcour la liste des WindOrientation
                {% for windOrientation in spot.windOrientation %}
                tabOrientationState["{{ windOrientation.orientation }}"]="{{ windOrientation.state?windOrientation.state:"?" }}";
                {% endfor %}

                svgLoad(tabOrientationState);
            }
        </script>

    </div>


    <div class="col-sm-6 centered">
        {% if spot.mareeURL|default is not empty %}

            {% from "LaPoizWindBundle:BackOffice/Spot/Ajax/Maree:graph.html.twig" import graphMaree %}
            {{ graphMaree(spot) }}

            <script>

                // **************************************
                // ** Charge les restrictions de marée **
                // **************************************

                jQuery(document).ready(function() {
                    // Parcour la liste des MareeRestriction
                    {% for mareeRestriction in spot.mareeRestriction %}
                        drawPlotBand({{ mareeRestriction.hauteurMin }},{{ mareeRestriction.hauteurMax }},"{{ mareeRestriction.state }}");
                    {% endfor %}
                });
            </script>

        {% endif %}
    </div>

</div>

{% endblock %}


